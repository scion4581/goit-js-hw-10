{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\"use strict\";\n\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\nimport errorIcon from '../img/error-icon.png';\n\nconst startTimerButton = document.querySelector(\".timer-section button\");\nconst timerDateInput = document.getElementById(\"datetime-picker\");\n\nconst timerDaysLabel = document.querySelector(\"[data-days]\");\nconst timerHoursLabel = document.querySelector(\"[data-hours]\");\nconst timerMinutesLabel = document.querySelector(\"[data-minutes]\");\nconst timerSecondsLabel = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate;\nlet timerIntervalId;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      onSelectDate(selectedDates[0]);\n  },\n};\n\nfunction onSelectDate(date) {\n    const selectedTime = date.getTime();\n    const currentTime = new Date().getTime();\n    if (selectedTime <= currentTime) {\n        showErrorMessage(\"Please choose a date in the future\");\n        startTimerButton.disabled = true;\n    } else {\n        startTimerButton.disabled = false;\n        userSelectedDate = date;  \n    }\n}\n\nfunction showErrorMessage(msgText) {\n    iziToast.error({\n        title: 'Error',\n        message: msgText,\n        iconUrl: errorIcon,\n        position: 'topRight',\n        titleColor: '#FFF',\n        messageColor: '#FFF',\n        backgroundColor: '#EF4040',\n        theme: 'dark',\n        progressBar: false,\n    });\n}\n\nfunction convertMs(ms) {\n\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n    \n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateTimerLabels({ days, hours, minutes, seconds }) {\n    timerDaysLabel.textContent = addLeadingZero(days);\n    timerHoursLabel.textContent = addLeadingZero(hours);\n    timerMinutesLabel.textContent = addLeadingZero(minutes)\n    timerSecondsLabel.textContent = addLeadingZero(seconds);\n}\n\nfunction onTmerTick() {\n    const timeNow = new Date().getTime();\n    const userSelectedTime = userSelectedDate.getTime();\n    \n    // has the selected date arrived? \n    if (timeNow >= userSelectedTime) {\n        updateTimerLabels({days: 0, hours: 0, minutes: 0, seconds: 0});\n        clearInterval(timerIntervalId);\n        timerDateInput.disabled = false;\n        return;\n    }\n    //calculate diff\n    updateTimerLabels(convertMs(userSelectedTime - timeNow));\n}\n\nfunction addLeadingZero(value) {\n    return value.toString().padStart(2, '0');\n}\n\nstartTimerButton.addEventListener('click', function () {\n    timerIntervalId = setInterval(onTmerTick, 1000);\n    timerDateInput.disabled = true;\n    startTimerButton.disabled = true;\n})\n\nflatpickr(\"#datetime-picker\", options);\n"],"names":["startTimerButton","timerDateInput","timerDaysLabel","timerHoursLabel","timerMinutesLabel","timerSecondsLabel","userSelectedDate","timerIntervalId","options","selectedDates","onSelectDate","date","selectedTime","currentTime","showErrorMessage","msgText","iziToast","errorIcon","convertMs","ms","days","hours","minutes","seconds","updateTimerLabels","addLeadingZero","onTmerTick","timeNow","userSelectedTime","value","flatpickr"],"mappings":"2GAMA,MAAMA,EAAmB,SAAS,cAAc,uBAAuB,EACjEC,EAAiB,SAAS,eAAe,iBAAiB,EAE1DC,EAAiB,SAAS,cAAc,aAAa,EACrDC,EAAkB,SAAS,cAAc,cAAc,EACvDC,EAAoB,SAAS,cAAc,gBAAgB,EAC3DC,EAAoB,SAAS,cAAc,gBAAgB,EAEjE,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBC,EAAaD,EAAc,CAAC,CAAC,CAChC,CACH,EAEA,SAASC,EAAaC,EAAM,CACxB,MAAMC,EAAeD,EAAK,UACpBE,EAAc,IAAI,KAAM,EAAC,QAAO,EAClCD,GAAgBC,GAChBC,EAAiB,oCAAoC,EACrDd,EAAiB,SAAW,KAE5BA,EAAiB,SAAW,GAC5BM,EAAmBK,EAE3B,CAEA,SAASG,EAAiBC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,QAASE,EACT,SAAU,WACV,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,MAAO,OACP,YAAa,EACrB,CAAK,CACL,CAEA,SAASC,EAAUC,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAkB,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DrB,EAAe,YAAcuB,EAAeL,CAAI,EAChDjB,EAAgB,YAAcsB,EAAeJ,CAAK,EAClDjB,EAAkB,YAAcqB,EAAeH,CAAO,EACtDjB,EAAkB,YAAcoB,EAAeF,CAAO,CAC1D,CAEA,SAASG,GAAa,CAClB,MAAMC,EAAU,IAAI,KAAM,EAAC,QAAO,EAC5BC,EAAmBtB,EAAiB,UAG1C,GAAIqB,GAAWC,EAAkB,CAC7BJ,EAAkB,CAAC,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAC,EAC7D,cAAcjB,CAAe,EAC7BN,EAAe,SAAW,GAC1B,MACH,CAEDuB,EAAkBN,EAAUU,EAAmBD,CAAO,CAAC,CAC3D,CAEA,SAASF,EAAeI,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC3C,CAEA7B,EAAiB,iBAAiB,QAAS,UAAY,CACnDO,EAAkB,YAAYmB,EAAY,GAAI,EAC9CzB,EAAe,SAAW,GAC1BD,EAAiB,SAAW,EAChC,CAAC,EAED8B,EAAU,mBAAoBtB,CAAO"}